(()=>{"use strict";const e=(e,t)=>{const o=document.getElementById(e),l=document.createElement("div"),n=document.querySelectorAll(".popup"),s=document.querySelector("#thanks"),c=s.querySelector(".form-content"),r=(document.querySelectorAll('input[type="checkbox"]'),document.querySelector("#footer_form")),a=r.querySelectorAll('.club > input[type="radio"]'),i="Необходимо подтвердить согласие на обработку персональных данных";let d;l.style.cssText="font-size: 20px;max-width:400px;margin: 0 auto;padding-top:10px;color:rgb(168, 15, 15);",!1!==t&&(d=document.getElementById(t),d.addEventListener("change",(()=>{d&&!1===d.checked?l.textContent=i:l.textContent=""})));let u=!1;a.forEach((e=>{e.checked&&(u=!0)})),u||r.addEventListener("click",(e=>{e.target.closest(".club")&&(l.textContent="",u=!0)})),o.addEventListener("submit",(e=>{e.preventDefault(),o.appendChild(l);const r=e.target;l.textContent="идет отправка";const a=new FormData(o);let m={};if(a.forEach(((e,t)=>{m[t]=e})),!1!==t){if(d&&!1===d.checked)return void(l.textContent=i);l.textContent=""}if(r.closest("#footer_form")){if(!u)return void(l.textContent="Пожалуйста, выберите клуб");l.textContent="",u=!1}y(m).then((e=>{if(200!==e.status)throw new Error("status networking not 200");l.textContent="",s.style.display="block",setTimeout((()=>{n.forEach((e=>e.style.display="none")),s.style.display="none"}),2e3)})).catch((e=>{l.textContent="",s.style.display="block",c.innerHTML='<div class="form-content">\n               <h4>Извините!</h4>\n               <p>Что-то пошло не так.<br> Ваша заявка не отправлена.</p>\n               <button class="btn close-btn">Закрыть</button>\n            </div>',setTimeout((()=>{s.style.display="block",n.forEach((e=>e.style.display="none"))}),2e3)})),o.reset()}));const y=e=>fetch("./server.php",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})};(()=>{const e=document.querySelector(".club-select").querySelector("ul");window.addEventListener("click",(t=>{const o=t.target;o.closest(".club-select")?e.classList.toggle("list-active"):o.closest(".club-select>ul")||e.classList.remove("list-active")}))})(),(()=>{const e=document.querySelector(".fixed-gift"),t=document.querySelector("#free_visit_form"),o=document.querySelector("#callback_form"),l=document.querySelector("#gift"),n=document.querySelector("#thanks"),s=document.querySelector('form[name="free-visit-form"]'),c=document.querySelector('form[name="callback-form"]');window.addEventListener("click",(r=>{const a=r.target;a.closest(".open-popup")?t.style.display="block":!a.closest(".close-form")&&a.closest("#form2")||(t.style.display="none",s.reset()),a.closest(".callback-btn")?o.style.display="block":!a.closest(".close_icon")&&a.closest("#form1")||(o.style.display="none",c.reset()),a.closest(".fixed-gift")?(l.style.display="block",e.style.display="none"):(a.closest("#gift>.close_icon")||a.closest(".close-btn")||!a.closest(".form-content"))&&(l.style.display="none"),(a.closest("#thanks .sloce-icon")||!a.closest("#thanks .form-content")||a.closest("#thanks .close-btn"))&&(n.style.display="none")}))})(),(()=>{const e=document.querySelector(".popup-menu"),t=(document.querySelector(".menu-button"),document.querySelector(".top-menu")),o=t.offsetTop,l=document.querySelector("#my-style");if(window.addEventListener("click",(t=>{const o=t.target;o.closest(".menu-button")?e.style.display="flex":(o.closest(".close-menu-btn")||o.closest(".popup-menu>ul>li>a"))&&(e.style.display="none")})),!l){const e=document.createElement("style");e.setAttribute("id","my-style"),e.textContent="\n         .position {\n            position: fixed;\n            top:0;\n            right: 14px;\n            z-index: 300;\n         }\n      ",document.head.appendChild(e)}window.addEventListener("scroll",(e=>{window.pageYOffset>o?t.classList.add("position"):t.classList.remove("position")}))})(),(()=>{const e=document.querySelectorAll("form"),t=/^[А-Яа-я ]{2,20}$/,o=/^(8|\+7)([0-9]{9,10})$/,l=e=>{e.value=e.value.replace(/-{2,}/g,"-"),e.value=e.value.replace(/\s{2,}/g," "),e.value=e.value.replace(/^[ \s]+|[ \s]+$/,""),e.value=e.value.replace(/^[/-]+|[/-]+$/,"")},n=e=>{"name"===e.name&&""!==e.value&&(t.test(e.value)?((e=>{let t=e.value.split(" ");for(let e=0;e<t.length;e++)t[e]=t[e].slice(0,1).toUpperCase()+t[e].slice(1).toLowerCase();let o=t.join(" ");e.value=o})(e),l(e),e.style.border="3px solid green"):(e.style.border="3px solid red",e.value="")),"phone"===e.name&&""!==e.value&&(o.test(e.value)?(l(e),e.style.border="3px solid green"):(e.style.border="3px solid red",e.value=""))};e.forEach((e=>{for(let t of e.elements)"BUTTON"!==t.tagName&&t.addEventListener("blur",(()=>{n(t)}));e.addEventListener("submit",(t=>{t.preventDefault();for(let t of e.elements)"BUTTON"!==t.tagName&&""!==t.value&&(t.style.border="none")}))}))})(),(()=>{const e=document.getElementById("totop"),t=document.querySelector(".header-main").offsetTop;e.style.display="none",window.addEventListener("scroll",(o=>{window.pageYOffset>t?e.style.display="block":e.style.display="none"}))})(),e("banner-form","check1"),e("footer_form",!1),e("form1","check"),e("form2","check2"),e("card_order","card_check"),(()=>{const e=document.querySelector(".main-slider").querySelectorAll(".slide");let t,o=0;const l=()=>{e[o].style.cssText="\n      opacity: 0;\n      transition: opacity 1s;\n      ",o++,o>=e.length&&(o=0),e[o].style.cssText="\n      opacity: 1;\n      transition: opacity 1s;\n      "};((e=1e3)=>{t=setInterval(l,e)})(3e3)})(),(()=>{const e=document.querySelector(".gallery-slider"),t=e.querySelectorAll(".slide"),o=(document.querySelector("#style-gallery"),document.querySelector(".gallery-line"));let l,n=0;const s=(e,t,o)=>{e[t].classList.remove(o)},c=(e,t,o)=>{e[t].classList.add(o)};for(let e=0;e<t.length;e++){const e=document.createElement("li");e.className="line",o.append(e)}let r=document.querySelectorAll(".line");r[n].classList.add("line-active");const a=()=>{s(t,n,"slide-active"),s(r,n,"line-active"),n++,n>=t.length&&(n=0),c(t,n,"slide-active"),c(r,n,"line-active")},i=(e=3e3)=>{l=setInterval(a,e)};e.addEventListener("click",(e=>{e.preventDefault();const o=e.target;s(t,n,"slide-active"),s(r,n,"line-active"),o.closest("#arrow-right")?n++:o.closest("#arrow-left")?n--:o.matches(".line")&&r.forEach(((e,t)=>{e===o&&(n=t)})),n>=t.length&&(n=0),n<0&&(n=t.length-1),c(t,n,"slide-active"),c(r,n,"line-active")})),e.addEventListener("mouseover",(e=>{e.target.closest(".gallery-slider")&&clearInterval(l)})),e.addEventListener("mouseout",(e=>{e.target.closest(".gallery-slider")&&i()})),i(3e3)})(),(()=>{const e=document.querySelector(".services-slider"),t=(e.querySelectorAll(".slide"),document.querySelector(".services-block"));let o=0;t.addEventListener("click",(t=>{t.preventDefault();const l=t.target;l.closest("#arrow-right")?o<1050&&(o+=224,e.style.left=-o+"px"):l.closest("#arrow-left")&&(o>1050||o>0)&&(o-=224,e.style.left=-o+"px")}))})(),(()=>{const e=document.querySelector("#price-total"),t=document.querySelector("#card_order"),o=document.querySelector(".price-message>input"),l={mozaika:[1999,9900,13900,19900],schelkovo:[2999,14990,21990,24990]};let n=0,s=l.mozaika,c=l.mozaika[0];e&&(e.textContent=c,t.addEventListener("click",(t=>{const r=t.target;r.closest(".time")&&"LABEL"===r.tagName&&(n=+r.getAttribute("for").slice(1,r.length)-1),r.closest(".club")&&"INPUT"===r.tagName&&(s=l[r.value]),c=s[n],"ТЕЛО2021"===o.value&&(c=Math.round(.7*c),e.innerHTML=c),e.innerHTML=c})),o.addEventListener("input",(()=>{"ТЕЛО2021"===o.value&&(c=Math.round(.7*c),e.innerHTML=c)})))})()})();